#:import dp kivy.metrics.dp

<ImageButton@ButtonBehavior+Image>:
    allow_stretch: True
    keep_ratio: True

<Header@BoxLayout>:
    size_hint_y: None
    height: dp(60)
    padding: dp(10), 0
    spacing: dp(10)
    canvas.before:
        Color:
            rgba: 0.07, 0.57, 0.38, 1
        Rectangle:
            pos: self.pos
            size: self.size

    Label:
        text: "NERD HUB"
        color: 1, 1, 1, 1
        font_size: '18sp'
        size_hint_x: None
        width: dp(120)
        halign: 'center'
        valign: 'middle'
        text_size: self.size

    TextInput:
        hint_text: "Buscar..."
        multiline: False
        background_normal: ''
        background_active: ''
        background_color: 1,1,1,1
        foreground_color: 0,0,0,1
        font_size: '14sp'
        size_hint_x: 1.5
        size_hint_y: None
        height: dp(36)
        padding: [dp(12), dp(10)]
        radius: [dp(8),]
        pos_hint: {'center_y': 0.5}

    BoxLayout:
        size_hint_x: None
        width: dp(80)
        spacing: dp(10)
        padding: 0, dp(12)

        ImageButton:
            source: 'nerd_hub.kv/imagens/imagens_home/carrinho.png'
            size_hint: None, None
            width: dp(25)
            height: dp(25)
            on_release:
                app.root.transition.direction = "left"
                app.root.current = "carrinho"

        ImageButton:
            source: 'nerd_hub.kv/imagens/imagens_home/perfil.png'
            size_hint: None, None
            width: dp(25)
            height: dp(25)
            on_release:
                app.root.transition.direction = "left"
                app.root.current = "login"

<Banner@BoxLayout>:
    size_hint_y: None
    height: dp(200)
    padding: dp(10), dp(5)
    spacing: 0
    orientation: 'horizontal'
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size
            source: "imagens/imagens_home/banner_principal.png"
    Widget:
        size_hint_x: 0.5


<ProductCard@BoxLayout>:
    orientation: 'vertical'
    size_hint_y: None
    height: dp(250)
    padding: dp(8)
    spacing: dp(5)
    title: ''
    price: ''
    image: ''
    product_data: {}
    canvas.before:
        Color:
            rgba: 1,1,1,1
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [dp(8),]

    # Imagem real do produto
    Image:
        source: root.image if root.image else 'imagens/placeholder.png'
        allow_stretch: True
        keep_ratio: True
        size_hint_y: None
        height: dp(130)
        canvas.before:
            Color:
                rgba: 0.95,0.95,0.95,1
            Rectangle:
                pos: self.pos
                size: self.size

    Label:
        text: root.title
        text_size: self.width, None
        halign: 'center'
        valign: 'middle'
        color: 0,0,0,1
        size_hint_y: None
        height: dp(40)

    Label:
        text: root.price
        size_hint_y: None
        height: dp(22)
        halign: 'center'
        valign: 'middle'
        color: 0.07, 0.57, 0.38, 1

    Button:
        text: "Adicionar ao Carrinho"
        size_hint_y: None
        height: dp(34)
        background_normal: ''
        background_color: 0.07,0.57,0.38,1
        color: 1,1,1,1
        font_size: '12sp'
        on_release:
            app.adicionar_ao_carrinho({'title': root.title, 'price': root.price, 'image': root.image})


<HomeScreen>:
    canvas.before:
        Color:
            rgba: 0.9, 0.9, 0.9, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'
        padding: 0
        spacing: 0

        Header:

        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            bar_width: 0

            GridLayout:
                cols: 1
                spacing: 0
                size_hint_y: None
                height: self.minimum_height
                padding: 0

                Banner:

                Widget:
                    size_hint_y: None
                    height: dp(10)

                Carousel:
                    id: subbanner_carousel
                    direction: 'right'
                    loop: True
                    size_hint_y: None
                    height: dp(200)
                    anim_move_duration: 0.3
                    scroll_timeout: 200
                    spacing: dp(15)

                    FloatLayout:
                        size_hint: None, None
                        size: dp(400), dp(200)
                        ImageButton:
                            source: "imagens/imagens_home/banner_disney.png"
                            on_release:
                                app.root.transition.direction = "left"
                                app.root.current = "disney"

                    FloatLayout:
                        size_hint: None, None
                        size: dp(400), dp(200)
                        ImageButton:
                            source: "imagens/imagens_home/banner_xbox.png"
                            on_release:
                                app.root.transition.direction = "left"
                                app.root.current = "xbox"

                    FloatLayout:
                        size_hint: None, None
                        size: dp(400), dp(200)
                        ImageButton:
                            source: "imagens/imagens_home/banner_marvel.png"
                            on_release:
                                app.root.transition.direction = "left"
                                app.root.current = "marvel"

                    FloatLayout:
                        size_hint: None, None
                        size: dp(400), dp(200)
                        ImageButton:
                            source: "imagens/imagens_home/banner_playstation.png"
                            on_release:
                                app.root.transition.direction = "left"
                                app.root.current = "playstation"

                    FloatLayout:
                        size_hint: None, None
                        size: dp(400), dp(200)
                        ImageButton:
                            source: "imagens/imagens_home/banner_starwars.png"
                            on_release:
                                app.root.transition.direction = "left"
                                app.root.current = "starwars"

                Widget:
                    size_hint_y: None
                    height: dp(10)

                BoxLayout:
                    size_hint_y: None
                    height: dp(32)
                    padding: dp(8), 0
                    canvas.before:
                        Color:
                            rgba: 0.07, 0.57, 0.38, 1
                        Rectangle:
                            pos: self.pos
                            size: self.size
                    Label:
                        text: "PRODUTOS EM DESTAQUE"
                        color: 1, 1, 1, 1
                        bold: True
                        font_size: '16sp'
                        halign: 'center'
                        valign: 'middle'
                        text_size: self.size

                GridLayout:
                    id: products_grid
                    cols: 2
                    spacing: dp(8)
                    size_hint_y: None
                    height: self.minimum_height
                    row_default_height: dp(250)
